<%= form_with(model: workout, class: "contents") do |form| %>
  <div class="mb-4" data-controller="element-destroyer">
    <% if workout.errors.any? %>
      <div
        id="error_explanation"
        class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-md mt-3"
      >
        <h2><%= pluralize(workout.errors.count, "error") %>
          prohibited this workout from being saved:</h2>

        <ul class="list-disc ml-6">
          <% workout.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div
      class="mb-2 flex justify-center gap-4"
      data-element-destroyer-target="destroyable"
      data-controller="routine-switcher"
    >
      <%= select_tag "workout[workout_routine_day]",
      options_from_collection_for_select(
        WorkoutRoutine.order(:name).to_a,
        "id",
        "name",
        workout.workout_routine&.id,
      ),
      data: {
        action: "change->routine-switcher#switch",
      },
      class: "border w-[300px] border-slate-300 px-3.5 py-2 rounded" %>
      <%= turbo_frame_tag 'workout_routine_day_id' do %>
        <%= render partial: "workout_routine_days/select",
        locals: {
          workout_routine_days: workout.workout_routine&.workout_routine_days,
        } %>
      <% end %>
    </div>
    <div data-element-destroyer-target="destroyable">
      or
    </div>
    <div>
      <%= button "switch to custom routine",
      type: "button",
      style: "link",
      data: {
        action: "click->element-destroyer#destroy",
      } %>
    </div>
  </div>

  <div class="inline">
    <%= button text: "Start", type: "submit", style: "primary" %>
  </div>
<% end %>
