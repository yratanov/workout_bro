<% exercises = workout_routine_day.workout_routine_day_exercises.order(:position) %>
<% if exercises.any? %>
  <div
    class="space-y-2"
    data-controller="sortable"
    data-sortable-url-value="<%= move_workout_routine_workout_routine_day_workout_routine_day_exercise_path(workout_routine_day.workout_routine, workout_routine_day, ":id") %>"
  >
    <% exercises.each_with_index do |workout_routine_day_exercise, index| %>
      <div
        class="
          group flex items-center gap-3 bg-slate-700/50 rounded-lg px-4 py-3
          hover:bg-slate-700 transition-colors
        "
        data-sortable-id="<%= workout_routine_day_exercise.id %>"
      >
        <div
          class="
            cursor-grab active:cursor-grabbing text-slate-500 hover:text-slate-300
          "
          data-sortable-handle
        >
          <%= icon "grip_vertical" %>
        </div>
        <% if workout_routine_day_exercise.superset? %>
          <span class="text-blue-400"><%= icon "superset", size: "w-5 h-5" %></span>
          <div class="flex-1">
            <span class="font-medium"><%= workout_routine_day_exercise.superset.name %></span>
            <div class="text-slate-400 text-xs mt-1">
              <%= workout_routine_day_exercise.superset.exercises.map(&:name).join(" + ") %>
            </div>
          </div>
        <% else %>
          <% if workout_routine_day_exercise.exercise.muscle.present? %>
            <span class="text-slate-400"><%= muscle_icon(workout_routine_day_exercise.exercise.muscle, size: "w-5 h-5") %></span>
          <% end %>
          <span class="flex-1 font-medium"><%= workout_routine_day_exercise.exercise.name %></span>
          <% if workout_routine_day_exercise.exercise.muscle.present? %>
            <span class="text-slate-400 text-sm hidden sm:block"><%= workout_routine_day_exercise.exercise.muscle.human_name %></span>
          <% end %>
        <% end %>
        <%= button style: "link_hover_danger",
            type: "link",
            route: workout_routine_workout_routine_day_workout_routine_day_exercise_path(workout_routine_day.workout_routine, workout_routine_day, workout_routine_day_exercise),
            method: :delete,
            data: {
              turbo_prefetch: false,
              turbo_confirm: t("shared.confirmations.delete_confirm"),
              turbo_method: :delete,
            } do %>
          <span class="opacity-0 group-hover:opacity-100 transition-opacity">
            <%= icon "xmark" %>
          </span>
        <% end %>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="text-slate-500 text-sm italic py-4"><%= t("workout_routine_days.form.no_exercises") %></div>
<% end %>
