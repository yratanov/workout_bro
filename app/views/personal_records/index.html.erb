<% content_for :title, t(".title") %>

<div class="w-full max-w-3xl">
  <div class="flex justify-between items-center mb-6">
    <h1 class="font-bold text-3xl"><%= t(".title") %></h1>
  </div>

  <% if @personal_records.any? %>
    <div class="space-y-8">
      <% @personal_records.each do |date, prs| %>
        <div>
          <div class="flex items-center gap-3 mb-4">
            <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
            <h2 class="text-lg font-semibold text-slate-300"><%= l(date, format: :long) %></h2>
          </div>
          <div class="ml-6 border-l-2 border-slate-700 pl-6 space-y-3">
            <% prs.each do |pr| %>
              <div class="bg-slate-800 rounded-lg p-4">
                <div class="flex items-start justify-between">
                  <div>
                    <h3 class="font-medium text-lg"><%= pr.exercise.name %></h3>
                    <p class="text-slate-400 text-sm mt-1">
                      <% case pr.pr_type %>
                      <% when "max_weight" %>
                        <%= t(
                          ".max_weight_description",
                          weight: pr.weight,
                          reps: pr.reps,
                          unit: Current.user.weight_unit,
                        ) %>
                      <% when "max_volume" %>
                        <%= t(
                          ".max_volume_description",
                          volume: pr.volume.round(1),
                          weight: pr.weight,
                          reps: pr.reps,
                          unit: Current.user.weight_unit,
                        ) %>
                      <% when "max_reps" %>
                        <%= t(".max_reps_description", reps: pr.reps) %>
                      <% end %>
                    </p>
                  </div>
                  <div class="flex flex-col items-end gap-2">
                    <span
                      class="
                        inline-flex items-center px-2 py-1 rounded-full text-xs font-medium
                        <%= pr_type_badge_class(pr.pr_type) %>
                      "
                    >
                      <%= t(".pr_types.#{pr.pr_type}") %>
                    </span>
                    <% if pr.band.present? %>
                      <span
                        class="
                          inline-flex items-center px-2 py-1 bg-purple-600/20 text-purple-400 rounded-full
                          text-xs
                        "
                      >
                        <%= t(".bands.#{pr.band}") %>
                      </span>
                    <% end %>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="bg-slate-800 rounded-lg p-8 text-center">
      <div class="text-4xl mb-3"><%= icon "trophy", size: "w-12 h-12 mx-auto text-slate-500" %></div>
      <p class="text-slate-400"><%= t(".no_records") %></p>
      <p class="text-slate-500 text-sm mt-2"><%= t(".no_records_hint") %></p>
    </div>
  <% end %>
</div>
