services:
  web:
    image: yratanov/workout_bro:latest
    build: .
    volumes:
      - workout_data:/rails/storage
    ports:
      - "${EXPOSED_PORT:-3000}:80"
    environment:
      - DISABLE_SSL=${DISABLE_SSL:-true}
    restart: unless-stopped

  jobs:
    image: yratanov/workout_bro:latest
    build: .
    command: bin/jobs
    volumes:
      - workout_data:/rails/storage
    environment:
      - DISABLE_SSL=${DISABLE_SSL:-true}
    restart: unless-stopped
    depends_on:
      - web

volumes:
  workout_data:

